"use strict";
exports.__esModule = true;
var index_1 = require("./index");
function functionA() {
    throw new index_1.AmountRequired();
}
describe("custom errors", function () {
    test("error name", function () {
        try {
            functionA();
        }
        catch (e) {
            expect(e.name).toEqual("AmountRequired");
        }
    });
    test("error is correctly located at the functionA", function () {
        try {
            functionA();
        }
        catch (e) {
            var i = e.stack.indexOf("functionA");
            expect(e.stack.slice(0, i + 9)).toEqual("AmountRequired: AmountRequired\n    at functionA");
        }
    });
    test("error with custom message", function () {
        try {
            throw new index_1.AmountRequired("YO");
        }
        catch (e) {
            expect(e.message).toEqual("YO");
        }
    });
    test("error with custom fields", function () {
        try {
            throw new index_1.CurrencyNotSupported("YO", { currencyName: "foo" });
        }
        catch (e) {
            expect(
            // FIXME it's not yet the good type here
            e instanceof index_1.CurrencyNotSupported && e.currencyName).toEqual("foo");
        }
    });
    test("error.cause", function () {
        try {
            functionA();
        }
        catch (cause) {
            try {
                throw new index_1.AmountRequired("YO", { foo: 42 }, { cause: cause });
            }
            catch (e) {
                expect(e.cause).toMatchObject(new index_1.AmountRequired());
            }
        }
    });
    test("error instanceof", function () {
        try {
            functionA();
        }
        catch (e) {
            expect(e).toBeInstanceOf(index_1.AmountRequired);
        }
    });
    test("promise error instanceof", function () {
        expect(Promise.reject(new index_1.AmountRequired())).rejects.toBeInstanceOf(index_1.AmountRequired);
    });
    test("error is instance of Error", function () {
        var error = new index_1.AmountRequired();
        expect(error instanceof Error).toBeTruthy();
    });
});
//# sourceMappingURL=index.test.js.map